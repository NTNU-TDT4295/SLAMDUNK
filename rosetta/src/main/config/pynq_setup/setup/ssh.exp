#!/usr/bin/expect

set ip [lindex $argv 0];
set pwd [lindex $argv 1];
set cmd [lindex $argv 2];

spawn ssh xilinx@${ip} \
"echo $pwd | sudo -S bash /home/xilinx/$cmd"
expect {
    password: {send "${pwd}\r"; exp_continue}
}
